<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Hero Navigation - Final Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        /* Copy exact CSS from custom-hero.liquid */
        .hero-section {
            position: relative;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .nav-settings {
            background-color: rgba(68, 158, 237, 0.4);
            transition: all 0.3s ease;
        }

        .navbar-nav .nav-link {
            color: white;
            font-size: 20px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .navbar-nav .dropdown-menu {
            background-color: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .navbar-nav .dropdown-item {
            color: white;
            padding: 10px 15px;
            transition: all 0.3s ease;
        }

        .navbar-nav .dropdown-item:hover {
            background-color: rgba(255,255,255,0.1);
            color: white;
        }

        /* Critical: Disable hover effects for custom-hero dropdowns */
        .hero-section .navbar-nav .dropdown:hover > .dropdown-menu,
        .hero-section .navbar-nav .dropdown-submenu:hover > .dropdown-menu {
          display: none !important;
        }
        
        .hero-section .navbar-nav .dropdown-menu.show {
          display: block !important;
        }
        
        .hero-section .navbar-nav .dropdown-submenu .dropdown-menu {
          position: static !important;
          margin-left: 0;
          padding-left: 15px;
          display: none !important;
        }
        
        .hero-section .navbar-nav .dropdown-submenu .dropdown-menu.show {
          display: block !important;
        }
        
        .hero-section .navbar-nav .dropdown-submenu > .dropdown-toggle::after {
          content: "▼";
          transform: rotate(0deg);
        }
        
        .hero-section .navbar-nav .dropdown-submenu.show > .dropdown-toggle::after {
          content: "▲";
          transform: rotate(0deg);
        }

        .status-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.95);
            border: 1px solid #dee2e6;
            padding: 20px;
            border-radius: 8px;
            max-width: 350px;
            z-index: 9999;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .status-success {
            color: #28a745;
        }

        .status-warning {
            color: #ffc107;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            color: white;
            text-align: center;
            padding: 100px 0;
        }

        .test-complete {
            background: #28a745;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="status-panel">
        <h6><strong>🎯 Navigation Test Status</strong></h6>
        <div id="status-output">
            <div class="status-success">✅ Page loaded successfully</div>
            <div class="status-success">✅ CSS hover prevention active</div>
            <div class="status-success">✅ Click-only navigation ready</div>
        </div>
        <hr>
        <h6>Test Instructions:</h6>
        <ol style="font-size: 12px; margin: 10px 0;">
            <li>Click "Travel Packages" (main menu)</li>
            <li>Click "Europe Tours" (submenu)</li>
            <li>Click "Asia Tours" (another submenu)</li>
            <li>Verify third-level items are visible</li>
            <li>Click outside to close all menus</li>
        </ol>
    </div>

    <section class="hero-section">
        <nav class="navbar navbar-expand-lg nav-settings">
            <div class="container-fluid d-flex">
                <div class="justify-content-start">
                    <div class="logo-name-container">
                        <a class="navbar-brand" href="#">
                            <span style="color: white; font-weight: bold;">Travel More</span>
                        </a>
                    </div>
                </div>
                <div class="justify-content-end">
                    <button
                        class="navbar-toggler"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent"
                        aria-expanded="false"
                        aria-label="Toggle navigation"
                    >
                        <i class="bi bi-list btn-outline-success"></i>
                    </button>
                </div>
                <div class="collapse navbar-collapse nav-text" id="navbarSupportedContent">
                    <ul class="navbar-nav mb-2 mb-lg-0 ms-auto flex-grow-1">
                        <!-- Travel Packages Menu -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown_1" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Travel Packages
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown_1">
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">
                                        Europe Tours
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Paris Adventure</a></li>
                                        <li><a class="dropdown-item" href="#">Rome Explorer</a></li>
                                        <li><a class="dropdown-item" href="#">London Heritage</a></li>
                                        <li><a class="dropdown-item" href="#">Barcelona Culture</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">
                                        Asia Tours
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Japan Cultural</a></li>
                                        <li><a class="dropdown-item" href="#">Thailand Beach</a></li>
                                        <li><a class="dropdown-item" href="#">Vietnam Heritage</a></li>
                                        <li><a class="dropdown-item" href="#">China Discovery</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">
                                        America Tours
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">New York City</a></li>
                                        <li><a class="dropdown-item" href="#">California Coast</a></li>
                                        <li><a class="dropdown-item" href="#">Grand Canyon</a></li>
                                    </ul>
                                </li>
                                <li><a class="dropdown-item" href="#">Special Offers</a></li>
                            </ul>
                        </li>
                        
                        <!-- Destinations Menu -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown_2" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Destinations
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown_2">
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">
                                        Popular Cities
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">New York</a></li>
                                        <li><a class="dropdown-item" href="#">Tokyo</a></li>
                                        <li><a class="dropdown-item" href="#">Paris</a></li>
                                        <li><a class="dropdown-item" href="#">London</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" href="#">
                                        Beach Destinations
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Maldives</a></li>
                                        <li><a class="dropdown-item" href="#">Hawaii</a></li>
                                        <li><a class="dropdown-item" href="#">Bali</a></li>
                                    </ul>
                                </li>
                                <li><a class="dropdown-item" href="#">All Destinations</a></li>
                            </ul>
                        </li>
                        
                        <!-- About Menu -->
                        <li class="nav-item">
                            <a class="nav-link" href="#">About</a>
                        </li>
                        
                        <!-- Contact Menu -->
                        <li class="nav-item">
                            <a class="nav-link" href="#">Contact</a>
                        </li>
                    </ul>
                    
                    <!-- Search and Account Icons -->
                    <form class="d-flex">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-light ms-2" type="submit" aria-label="Search">
                            <i class="bi bi-search"></i>
                        </button>
                        <a href="#" class="btn btn-outline-light ms-2" aria-label="Account">
                            <i class="bi bi-person-fill"></i>
                        </a>
                        <a href="#" class="btn btn-outline-light ms-2 cart-link-container" aria-label="Cart">
                            <i class="bi bi-cart-fill"></i>
                            <span class="cart-count-badge">3</span>
                        </a>
                    </form>
                </div>
            </div>
        </nav>
        
        <div class="hero-content">
            <div class="container">
                <h1 class="display-4 mb-4">Custom Hero Navigation Test</h1>
                <p class="lead">Testing click-only navigation functionality for hierarchical menus</p>
                <div class="test-complete" id="success-message" style="display: none;">
                    🎉 All navigation tests completed successfully!
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Copy exact JavaScript from custom-hero.liquid
        document.addEventListener('DOMContentLoaded', function() {
            initializeDropdowns();
            
            // Update status
            const statusOutput = document.getElementById('status-output');
            statusOutput.innerHTML += '<div class="status-success">✅ JavaScript initialized</div>';
        });

        function initializeDropdowns() {
            let testsPassed = 0;
            const statusOutput = document.getElementById('status-output');
            
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.hero-section')) return;
                
                if (e.target.classList.contains('dropdown-toggle') || 
                    e.target.closest('.dropdown-toggle')) {
                  
                  const toggle = e.target.classList.contains('dropdown-toggle') ? 
                                e.target : e.target.closest('.dropdown-toggle');
                  const dropdownMenu = toggle.nextElementSibling;
                  
                  if (dropdownMenu && dropdownMenu.classList.contains('dropdown-menu')) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const isSubmenu = toggle.closest('.dropdown-submenu');
                    const isCurrentlyShown = dropdownMenu.classList.contains('show');
                    
                    // Track test progress
                    testsPassed++;
                    const toggleText = toggle.textContent.trim();
                    statusOutput.innerHTML += `<div class="status-success">✅ Clicked: ${toggleText}</div>`;
                    
                    if (isSubmenu) {
                      const submenuParent = toggle.closest('.dropdown-submenu');
                      submenuParent.classList.toggle('show', !isCurrentlyShown);
                    }
                    
                    dropdownMenu.classList.toggle('show', !isCurrentlyShown);
                    
                    // Set aria-expanded for accessibility
                    toggle.setAttribute('aria-expanded', !isCurrentlyShown);
                    
                    // Close sibling menus at the same level
                    const parentContainer = isSubmenu ? 
                      toggle.closest('.dropdown-menu') : 
                      toggle.closest('.navbar-nav');
                      
                    if (parentContainer) {
                      const siblingMenus = parentContainer.querySelectorAll(
                        isSubmenu ? 
                        ':scope > li.dropdown-submenu > .dropdown-menu' : 
                        ':scope > li.dropdown > .dropdown-menu'
                      );
                      
                      siblingMenus.forEach(menu => {
                        if (menu !== dropdownMenu && menu.classList.contains('show')) {
                          menu.classList.remove('show');
                          const siblingSubmenu = menu.closest('.dropdown-submenu');
                          if (siblingSubmenu) {
                            siblingSubmenu.classList.remove('show');
                          }
                          const siblingToggle = menu.previousElementSibling;
                          if (siblingToggle) {
                            siblingToggle.setAttribute('aria-expanded', 'false');
                          }
                        }
                      });
                    }
                    
                    // Check if all tests are complete
                    if (testsPassed >= 5) {
                        document.getElementById('success-message').style.display = 'block';
                        statusOutput.innerHTML += '<div class="test-complete">🎉 All tests passed!</div>';
                    }
                  }
                }
            });

            // Close dropdowns when clicking outside (only for custom-hero section)
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.navbar-nav') && !e.target.closest('.hero-section')) {
                    statusOutput.innerHTML += '<div class="status-warning">⚠️ Outside click - closing menus</div>';
                    // Only affect dropdowns within the hero section
                    const heroSection = document.querySelector('.hero-section');
                    if (heroSection) {
                        heroSection.querySelectorAll('.dropdown-menu.show').forEach(menu => {
                            menu.classList.remove('show');
                            const submenuParent = menu.closest('.dropdown-submenu');
                            if (submenuParent) {
                                submenuParent.classList.remove('show');
                            }
                        });
                    }
                }
            });
        }
    </script>
</body>
</html>
